
= Server

Configures how the HTTP server should operate

Configuration options:

|===
| Parameter | Type | Required | Default | Description

| BindHost
| string
| No
| 127.0.0.1
| IP address to bind HTTP server to

| Port
| int
| No
| 8080
| Port to bind HTTP server to

| RootPath
| string
| No
| /
| The root HTTP Path to serve all requests under.

| TilePath
| string
| No
| tiles
| The HTTP Path to serve tiles under in addition to RootPath. The defaults will result in a path that looks like /tiles/\{layer}/\{z}/\{x}/\{y}

| Headers
| map[string]string
| No
| None
| Include these headers in all response from server

| Production
| bool
| No
| false
| Hardens operation for usage in production. For instance, controls serving splash page, documentation, x-powered-by header.

| Timeout
| uint
| No
| 60
| How long (in seconds) a request can be in flight before we cancel it and return an error

| Gzip
| bool
| No
| false
| Whether to gzip compress HTTP responses

| Encrypt
| <<encryption,Encryption>>
| No
| None
| Configuration for enabling TLS (HTTPS). Don't specify to operate without encryption (the default)
|===

The following can be supplied as environment variables:

|===
| Configuration Parameter | Environment Variable

| BindHost
| SERVER_BINDHOST

| Port
| SERVER_PORT

| RootPath
| SERVER_ROOTPATH

| TilePath
| SERVER_TILEPATH

| Production
| SERVER_PRODUCTION

| Timeout
| SERVER_TIMEOUT

| Gzip
| SERVER_GZIP
|===

== Encryption

Configures how encryption should be applied to the server.

There are two main ways this can work:

. With a pre-supplied certificate and keyfile
. Via https://letsencrypt.org/how-it-works/[Let's Encrypt] (ACME) using Go's built-in autocert module

If a certificate and keyfile are supplied the server will utilize option 1, otherwise it'll fallback to option 2. If you don't want to utilize encryption (for example you have TLS termination handled externally) simply omit `Server.Encrypt`

Configuration options:

|===
| Parameter | Type | Required | Default | Description

| Domain
| string
| Yes
| None
| The domain name you're operating with (the domain end-users use)

| Cache
| string
| No
| ./certs
| The path to a directory to cache certificates in if using let's encrypt.

| Certificate
| string
| None
| The file path to the TLS certificate
|

| KeyFile
| string
| None
| The file path to the keyfile
|

| HttpPort
| int
| No
| None
| The port used for non-encrypted traffic. Required if using Let's Encrypt to provide for the ACME challenge, in which case this needs to indirectly be 80 (that is, this can be set to e.g. 8080 if something ahead of this redirects 80 to 8080). Everything except .well-known will be redirected to the main port when set.
|===

The following can be supplied as environment variables:

|===
| Configuration Parameter | Environment Variable

| Domain
| SERVER_ENCRYPT_DOMAIN

| Cache
| SERVER_ENCRYPT_CACHE

| Certificate
| SERVER_ENCRYPT_CERTIFICATE

| KeyFile
| SERVER_ENCRYPT_KEYFILE

| HttpPort
| SERVER_ENCRYPT_HTTPPORT
|===